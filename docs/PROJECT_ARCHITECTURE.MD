# Arquitetura do Projeto

## PadrÃµes Arquiteturais

Este projeto segue os princÃ­pios de **Clean Architecture** e **Domain-Driven Design (DDD)**.

### Clean Architecture

A Clean Architecture organiza o cÃ³digo em camadas concÃªntricas, onde as dependÃªncias apontam sempre para dentro (em direÃ§Ã£o ao domÃ­nio):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frameworks & Drivers                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  Interface Adapters                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚              Application Layer                  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚           Domain Layer                    â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Entities (regras de negÃ³cio)           â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Value Objects                          â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â€¢ Repository Interfaces                  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Use Cases (orquestraÃ§Ã£o)                     â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â€¢ Handlers (HTTP)                                    â”‚  â”‚
â”‚  â”‚  â€¢ Repository Implementations (PostgreSQL)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â€¢ HTTP Server, Database Driver, External APIs              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Domain-Driven Design (DDD)

Conceitos aplicados neste projeto:

| Conceito         | DescriÃ§Ã£o                                   | Exemplo no Projeto                       |
| ---------------- | ------------------------------------------- | ---------------------------------------- |
| **Entity**       | Objeto com identidade e comportamento       | `User`, `Movie`                          |
| **Value Object** | Objeto imutÃ¡vel definido por seus atributos | `Email`, `Password`                      |
| **Repository**   | AbstraÃ§Ã£o para persistÃªncia                 | `UserRepository`, `MovieRepository`      |
| **Use Case**     | Orquestra operaÃ§Ãµes do domÃ­nio              | `RegisterUseCase`, `GetTopMoviesUseCase` |

### Dependency Inversion Principle

As interfaces dos repositÃ³rios sÃ£o definidas na camada de domÃ­nio (`server/internal/domain/repository/`), e as implementaÃ§Ãµes concretas ficam na infraestrutura (`server/internal/infrastructure/postgres/`). Isso permite:

- Testar use cases sem banco de dados (mocks)
- Trocar a implementaÃ§Ã£o de persistÃªncia sem afetar o domÃ­nio
- Manter o domÃ­nio independente de frameworks

---

## Estrutura de Pastas

```
movies/
â”œâ”€â”€ server/                       # ğŸ”§ Backend Go (Clean Architecture)
â”‚   â”œâ”€â”€ cmd/                      # Entry points da aplicaÃ§Ã£o
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â””â”€â”€ main.go           # Ponto de entrada HTTP server
â”‚   â”‚
â”‚   â”œâ”€â”€ internal/                 # CÃ³digo interno (nÃ£o exportÃ¡vel)
â”‚   â”‚   â”œâ”€â”€ domain/               # ğŸ¯ Camada de DomÃ­nio
â”‚   â”‚   â”‚   â”œâ”€â”€ entity/           # Entidades ricas com comportamento
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user.go       # Entidade User + regras de negÃ³cio
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ movie.go      # Entidade Movie + comportamentos
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ mapper.go     # ConversÃ£o entity <-> model
â”‚   â”‚   â”‚   â”œâ”€â”€ repository/       # Interfaces + erros de domÃ­nio
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user_repository.go
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ movie_repository.go
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ errors.go     # Erros centralizados
â”‚   â”‚   â”‚   â””â”€â”€ valueobject/       # Value Objects imutÃ¡veis
â”‚   â”‚   â”‚       â”œâ”€â”€ email.go      # Email com validaÃ§Ã£o
â”‚   â”‚   â”‚       â””â”€â”€ password.go   # Password com hash/verify
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ usecase/              # ğŸ“‹ Camada de AplicaÃ§Ã£o
â”‚   â”‚   â”‚   â”œâ”€â”€ account/          # Casos de uso de conta
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ register.go
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ authenticate.go
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get_favorites.go
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ get_watchlist.go
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ save_to_collection.go
â”‚   â”‚   â”‚   â””â”€â”€ movie/            # Casos de uso de filmes
â”‚   â”‚   â”‚       â”œâ”€â”€ get_top_movies.go
â”‚   â”‚   â”‚       â”œâ”€â”€ get_random_movies.go
â”‚   â”‚   â”‚       â”œâ”€â”€ get_movie_by_id.go
â”‚   â”‚   â”‚       â”œâ”€â”€ search_movies.go
â”‚   â”‚   â”‚       â””â”€â”€ get_genres.go
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ handler/              # ğŸŒ Camada de Interface (HTTP)
â”‚   â”‚   â”‚   â”œâ”€â”€ account_handler.go # Endpoints de conta
â”‚   â”‚   â”‚   â””â”€â”€ movie_handler.go  # Endpoints de filmes
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ infrastructure/       # ğŸ”§ Camada de Infraestrutura
â”‚   â”‚       â””â”€â”€ postgres/         # ImplementaÃ§Ã£o PostgreSQL
â”‚   â”‚           â”œâ”€â”€ account_repository.go
â”‚   â”‚           â””â”€â”€ movie_repository.go
â”‚   â”‚
â”‚   â”œâ”€â”€ pkg/                      # Pacotes reutilizÃ¡veis
â”‚   â”‚   â”œâ”€â”€ logger/               # Logging
â”‚   â”‚   â”‚   â””â”€â”€ logger.go
â”‚   â”‚   â””â”€â”€ token/                # JWT utilities
â”‚   â”‚       â”œâ”€â”€ creation.go
â”‚   â”‚       â””â”€â”€ getsecret.go
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                   # DTOs (Data Transfer Objects)
â”‚   â”‚   â”œâ”€â”€ user.go               # DTO para API/persistÃªncia
â”‚   â”‚   â”œâ”€â”€ movie.go
â”‚   â”‚   â”œâ”€â”€ actor.go
â”‚   â”‚   â””â”€â”€ genre.go
â”‚   â”‚
â”‚   â”œâ”€â”€ database/                 # Scripts de banco de dados
â”‚   â”‚   â”œâ”€â”€ import/
â”‚   â”‚   â”‚   â”œâ”€â”€ database-dump.sql
â”‚   â”‚   â”‚   â””â”€â”€ install.go
â”‚   â”‚   â””â”€â”€ data/                 # Dados do PostgreSQL (volume)
â”‚   â”‚
â”‚   â”œâ”€â”€ go.mod                    # DependÃªncias Go
â”‚   â””â”€â”€ go.sum
â”‚
â”œâ”€â”€ web/                          # ğŸ¨ Frontend (cÃ³digo fonte)
â”‚   â”œâ”€â”€ src/                      # CÃ³digo fonte JavaScript
â”‚   â”‚   â”œâ”€â”€ app.js                # Entry point da aplicaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ components/           # Web Components
â”‚   â”‚   â”‚   â”œâ”€â”€ HomePage.js
â”‚   â”‚   â”‚   â”œâ”€â”€ MovieDetailsPage.js
â”‚   â”‚   â”‚   â”œâ”€â”€ MoviesPage.js
â”‚   â”‚   â”‚   â”œâ”€â”€ AccountPage.js
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ services/             # ServiÃ§os frontend
â”‚   â”‚       â”œâ”€â”€ API.js            # Cliente HTTP para backend
â”‚   â”‚       â”œâ”€â”€ Router.js         # Roteamento SPA
â”‚   â”‚       â”œâ”€â”€ Routes.js          # DefiniÃ§Ã£o de rotas
â”‚   â”‚       â””â”€â”€ Store.js           # Estado da aplicaÃ§Ã£o
â”‚   â”œâ”€â”€ public/                   # Arquivos pÃºblicos
â”‚   â”‚   â””â”€â”€ sw.js                 # Service Worker (cache SWR)
â”‚   â”œâ”€â”€ index.html                # HTML principal
â”‚   â”œâ”€â”€ styles.css                # Estilos CSS
â”‚   â”œâ”€â”€ app.webmanifest           # PWA manifest
â”‚   â””â”€â”€ images/                   # Assets de imagem
â”‚
â”œâ”€â”€ public/                       # ğŸ“¦ Build/Dist (gerado pelo build.sh)
â”‚   â”œâ”€â”€ index.html                # HTML otimizado
â”‚   â”œâ”€â”€ app.js                    # JavaScript bundle
â”‚   â”œâ”€â”€ styles.css                # CSS otimizado
â”‚   â”œâ”€â”€ sw.js                     # Service Worker (cache SWR)
â”‚   â”œâ”€â”€ components/               # Web Components
â”‚   â”œâ”€â”€ services/                 # ServiÃ§os frontend
â”‚   â”œâ”€â”€ images/                   # Assets de imagem
â”‚   â””â”€â”€ app.webmanifest           # PWA manifest
â”‚
â”œâ”€â”€ build.sh                      # Script de build (web/ â†’ public/)
â”œâ”€â”€ Dockerfile                    # Build da aplicaÃ§Ã£o
â”œâ”€â”€ docker-compose.yaml           # OrquestraÃ§Ã£o de containers
â”œâ”€â”€ .air.toml                     # ConfiguraÃ§Ã£o do Air (live reload)
â”œâ”€â”€ .env.example                  # Exemplo de variÃ¡veis de ambiente
â””â”€â”€ docs/                         # DocumentaÃ§Ã£o
    â””â”€â”€ PROJECT_ARCHITECTURE.MD   # Este arquivo
```

### SeparaÃ§Ã£o Frontend/Backend

O projeto segue uma separaÃ§Ã£o clara entre frontend e backend:

- **`server/`**: Todo o cÃ³digo backend em Go, seguindo Clean Architecture
- **`web/`**: CÃ³digo fonte do frontend (Vanilla JavaScript) - onde vocÃª desenvolve
- **`public/`**: Build/dist do frontend - arquivos otimizados servidos pelo backend

**Workflow de Build:**

1. Desenvolve o frontend em `web/`
2. Executa `npm run build` na pasta `/web` para gerar `public/`
3. O servidor Go serve os arquivos de `public/` como arquivos estÃ¡ticos

**Nota**: A pasta `public/` Ã© gerada automaticamente e nÃ£o deve ser versionada (estÃ¡ no `.gitignore`).

---

## Service Worker e Cache Strategy

O projeto implementa um **Service Worker** (`web/public/sw.js`) que atua como uma camada intermediÃ¡ria entre o frontend e a rede, proporcionando cache offline e melhor performance atravÃ©s da estratÃ©gia **SWR (Stale-While-Revalidate)**.

### Funcionalidades do Service Worker

1. **Cache Versionado**: Utiliza cache nomeado (`movies-cache-v1`) para facilitar atualizaÃ§Ãµes e limpeza de caches antigos
2. **EstratÃ©gia SWR**: Para a maioria das requisiÃ§Ãµes, retorna imediatamente a versÃ£o em cache (stale) enquanto busca uma versÃ£o atualizada em background
3. **Network-First para APIs**: RequisiÃ§Ãµes para `/api/` utilizam estratÃ©gia network-first com fallback para cache
4. **AtivaÃ§Ã£o Imediata**: Utiliza `skipWaiting()` e `clients.claim()` para ativaÃ§Ã£o imediata apÃ³s instalaÃ§Ã£o

### EstratÃ©gias de Cache Implementadas

#### 1. Stale-While-Revalidate (SWR) - RequisiÃ§Ãµes Gerais

- **Comportamento**: Retorna cache imediatamente se disponÃ­vel, enquanto busca atualizaÃ§Ã£o em background
- **AplicaÃ§Ã£o**: Todos os recursos exceto `/api/`
- **BenefÃ­cio**: Resposta instantÃ¢nea ao usuÃ¡rio com dados atualizados em background

#### 2. Network-First com Cache Fallback - APIs

- **Comportamento**: Tenta rede primeiro, usa cache apenas se a rede falhar
- **AplicaÃ§Ã£o**: Todas as requisiÃ§Ãµes para `/api/`
- **BenefÃ­cio**: Garante dados atualizados quando possÃ­vel, com fallback offline

### Registro do Service Worker

O Service Worker Ã© registrado automaticamente na inicializaÃ§Ã£o da aplicaÃ§Ã£o (`app.js`):

```javascript
navigator.serviceWorker.register("/sw.js");
```

---

## Processo de Build e Deploy

### Desenvolvimento

1. **Frontend**: Edite os arquivos em `web/` diretamente
2. **Build**: Execute `./build.sh` para gerar `public/`
3. **Backend**: O cÃ³digo em `server/` Ã© compilado e executado pelo Air (live reload)

### ProduÃ§Ã£o

O `Dockerfile` automatiza o processo:

- **Stage 1 (dev)**: Monta volumes para desenvolvimento com hot reload
- **Stage 2 (builder)**: Compila o backend Go e executa `build.sh` para gerar `public/`
- **Stage 3 (prod)**: Imagem mÃ­nima com binÃ¡rio Go e arquivos estÃ¡ticos de `public/`

---

## Diagrama de Arquitetura

```mermaid
graph TD
  subgraph Frontend [Frontend SPA]
    App[App.js]
    Router[Router Service]
    Routes[Routes Definitions]
    API[API Service]

    subgraph Components [Web Components]
      Pages[Page Components]
      Shared[Shared Components]
    end

    UI[HTML/CSS Interface]
  end

  subgraph SW [Service Worker Layer]
    SW[Service Worker<br/>sw.js]
    Cache[Cache Storage<br/>movies-cache-v1]
  end

  subgraph Backend [Backend - Clean Architecture]
    subgraph Handlers [Interface Layer]
      HTTP[HTTP Handlers]
    end

    subgraph UseCases [Application Layer]
      UC[Use Cases]
    end

    subgraph Domain [Domain Layer]
      Entities[Entities]
      VO[Value Objects]
      RepoInterface[Repository Interfaces]
    end

    subgraph Infra [Infrastructure Layer]
      RepoImpl[PostgreSQL Repositories]
      Logger[Logger]
      Token[JWT Token]
    end
  end

  subgraph Database [Persistence]
    DB[(PostgreSQL)]
  end

  subgraph External [External Resources]
    YouTube[YouTube Videos]
    TMDB[TMDB Images]
  end

  %% Frontend Flow
  App --> Router
  Router --> Routes
  Routes --> Pages
  Pages --> Shared
  Pages --> API
  Shared --> API
  Pages --> UI
  Shared --> UI

  %% Service Worker Interception
  API -- HTTP Requests --> SW
  UI -- Static Assets --> SW
  SW --> Cache
  SW -- SWR Strategy --> HTTP
  SW -- Network-First --> HTTP

  %% Backend Flow (Dependency Direction: Outside â†’ Inside)
  HTTP --> UC
  UC --> Entities
  UC --> VO
  UC --> RepoInterface
  RepoImpl -.implements.-> RepoInterface
  RepoImpl --> DB

  %% Infrastructure
  HTTP --> Logger
  UC --> Logger
  HTTP --> Token

  %% External Resources
  UI --> YouTube
  UI --> TMDB

  %% Styling
  classDef domain fill:#e1f5fe,stroke:#01579b
  classDef application fill:#fff3e0,stroke:#e65100
  classDef interface fill:#f3e5f5,stroke:#4a148c
  classDef infra fill:#e8f5e9,stroke:#1b5e20
  classDef sw fill:#fff9c4,stroke:#f57f17

  class Entities,VO,RepoInterface domain
  class UC application
  class HTTP interface
  class RepoImpl,Logger,Token infra
  class SW,Cache sw
```

### EstratÃ©gia SWR (Stale-While-Revalidate)

O diagrama abaixo detalha o fluxo da estratÃ©gia SWR implementada pelo Service Worker:

```mermaid
sequenceDiagram
    participant App as AplicaÃ§Ã£o Frontend
    participant SW as Service Worker
    participant Cache as Cache Storage
    participant Network as Rede/Backend

    App->>SW: RequisiÃ§Ã£o de Recurso

    alt Recurso em Cache
        SW->>Cache: Busca versÃ£o cached
        Cache-->>SW: Retorna versÃ£o stale
        SW-->>App: Resposta imediata (stale)

        par AtualizaÃ§Ã£o em Background
            SW->>Network: Busca versÃ£o atualizada
            Network-->>SW: Nova versÃ£o
            SW->>Cache: Atualiza cache
        end
    else Recurso nÃ£o estÃ¡ em Cache
        SW->>Network: Busca recurso
        Network-->>SW: Resposta
        SW->>Cache: Armazena no cache
        SW-->>App: Retorna resposta
    end

    Note over App,Network: UsuÃ¡rio recebe resposta instantÃ¢nea<br/>Cache Ã© atualizado em background
```

### EstratÃ©gia Network-First para APIs

Para requisiÃ§Ãµes de API (`/api/*`), o Service Worker utiliza uma estratÃ©gia diferente:

```mermaid
sequenceDiagram
    participant App as AplicaÃ§Ã£o Frontend
    participant SW as Service Worker
    participant Cache as Cache Storage
    participant API as Backend API

    App->>SW: RequisiÃ§Ã£o /api/*

    SW->>API: Tenta rede primeiro

    alt Rede DisponÃ­vel
        API-->>SW: Resposta atualizada
        SW->>Cache: Atualiza cache
        SW-->>App: Retorna resposta da rede
    else Rede IndisponÃ­vel
        SW->>Cache: Busca versÃ£o cached
        alt Cache DisponÃ­vel
            Cache-->>SW: VersÃ£o cached
            SW-->>App: Retorna cache (fallback offline)
        else Sem Cache
            SW-->>App: Erro (sem rede e sem cache)
        end
    end

    Note over App,API: Prioriza dados atualizados<br/>com fallback offline
```

---

## Fluxo de uma RequisiÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚â”€â”€â”€â–¶â”‚ Handler â”‚â”€â”€â”€â–¶â”‚ UseCase â”‚â”€â”€â”€â–¶â”‚ Entity/  â”‚â”€â”€â”€â–¶â”‚  Repo  â”‚
â”‚  (HTTP)  â”‚    â”‚         â”‚    â”‚         â”‚    â”‚ ValueObj â”‚    â”‚ (impl) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                   â”‚
                                                                   â–¼
                                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
                                                              â”‚   DB   â”‚
                                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Exemplo: Registro de usuÃ¡rio**

1. **Handler** recebe requisiÃ§Ã£o HTTP com `{name, email, password}`
2. **UseCase** (`RegisterUseCase`) Ã© chamado
3. **Value Objects** (`Email`, `Password`) validam e encapsulam os dados
4. **Entity** (`User`) Ã© criada com as regras de negÃ³cio
5. **Repository** (interface) persiste via implementaÃ§Ã£o PostgreSQL
6. **Handler** retorna resposta JSON com JWT

---

## Models vs Entities

| Aspecto           | `server/models/` (DTOs)       | `server/internal/domain/entity/` |
| ----------------- | ----------------------------- | -------------------------------- |
| **Campos**        | PÃºblicos                      | Privados                         |
| **Comportamento** | Nenhum                        | MÃ©todos de negÃ³cio               |
| **Uso**           | SerializaÃ§Ã£o JSON, Scan do DB | LÃ³gica de domÃ­nio                |
| **Mutabilidade**  | Livre                         | Controlada por mÃ©todos           |

O `mapper.go` converte entre DTOs e Entities quando necessÃ¡rio.
